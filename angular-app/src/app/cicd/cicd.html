<!-- src/app/cicd-diagram/cicd-diagram.component.html -->
<div class="diagram-wrapper">
  <header class="card-header" style="text-align: center; margin-bottom: 1rem;">
    <h2 style="display: inline-flex; align-items: center; gap: 0.5rem; justify-content: center;">
      <span class="card-icon"></span>
      <span class="card-title">CI/CD Pipeline</span>
    </h2>
    <p class="card-subtitle">Automated deployment using <strong>GitHub Actions</strong>.</p>
  </header>

  <svg width="100%" height="600" viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="1000" height="600" fill="#0f0f1a" rx="12" />

    <!-- Arrow Markers -->
    <defs>
      <marker id="arrow-blue" markerWidth="12" markerHeight="12" refX="6" refY="6" orient="auto">
        <path d="M0,0 L0,12 L12,6 Z" fill="#3b82f6" />
      </marker>
      <marker id="arrow-green" markerWidth="12" markerHeight="12" refX="6" refY="6" orient="auto">
        <path d="M0,0 L0,12 L12,6 Z" fill="#10b981" />
      </marker>
      <marker id="arrow-purple" markerWidth="12" markerHeight="12" refX="6" refY="6" orient="auto">
        <path d="M0,0 L0,12 L12,6 Z" fill="#8b5cf6" />
      </marker>
      <marker id="arrow-red" markerWidth="12" markerHeight="12" refX="6" refY="6" orient="auto">
        <path d="M0,0 L0,12 L12,6 Z" fill="#ef4444" />
      </marker>
    </defs>

    <!-- GitHub -->
    <g transform="translate(100, 100)">
      <rect width="170" height="90" fill="#1e1e2f" rx="14" stroke="#3b82f6" stroke-width="2" />
      <image href="https://cdn.jsdelivr.net/npm/simple-icons@7.1/icons/github.svg?color=ffffff"
           x="15" y="25" width="40" height="40" 
       style="filter: brightness(0) invert(1);" />
      <text x="110" y="50" font-size="16" fill="#fff" text-anchor="middle">GitHub</text>
      <text x="110" y="70" font-size="12" fill="#9ca3af" text-anchor="middle">main branch</text>
    </g>

    <!-- GitHub Actions -->
    <g transform="translate(320, 100)">
      <rect width="170" height="90" fill="#1e1e2f" rx="14" stroke="#ef4444" stroke-width="2" />
      <image href="https://cdn.jsdelivr.net/npm/simple-icons@7.1/icons/githubactions.svg?color=ffffff"
         x="15" y="25" width="40" height="40" 
       style="filter: brightness(0) invert(1);" />
      <text x="110" y="50" font-size="16" fill="#fff" text-anchor="middle">GitHub Actions</text>
      <text x="110" y="70" font-size="12" fill="#9ca3af" text-anchor="middle">CI/CD Workflow</text>
    </g>

    <!-- Docker Build -->
    <g transform="translate(540, 100)">
      <rect width="170" height="90" fill="#1e1e2f" rx="14" stroke="#10b981" stroke-width="2" />
      <image href="https://cdn.jsdelivr.net/npm/simple-icons@7.1/icons/docker.svg?color=ffffff"
            x="15" y="25" width="40" height="40" 
       style="filter: brightness(0) invert(1);" />
      <text x="110" y="50" font-size="16" fill="#fff" text-anchor="middle">Docker Build</text>
      <text x="110" y="70" font-size="12" fill="#9ca3af" text-anchor="middle">Push to ACR</text>
    </g>

    <!-- ACR -->
    <g transform="translate(760, 100)">
      <rect width="170" height="90" fill="#1e1e2f" rx="14" stroke="#8b5cf6" stroke-width="2" />
      <image href="https://cdn.jsdelivr.net/npm/simple-icons@7.1/icons/microsoftazure.svg?color=ffffff"
            x="15" y="25" width="40" height="40" 
       style="filter: brightness(0) invert(1);" />
      <text x="110" y="50" font-size="16" fill="#fff" text-anchor="middle">Azure ACR</text>
      <text x="110" y="70" font-size="12" fill="#9ca3af" text-anchor="middle">Container Registry</text>
    </g>

    <!-- Web App -->
    <g transform="translate(540, 260)">
      <rect width="170" height="90" fill="#1e1e2f" rx="14" stroke="#10b981" stroke-width="2" />
      <image href="https://cdn.jsdelivr.net/npm/simple-icons@7.1/icons/azurefunctions.svg?color=white"  x="15" y="25" width="40" height="40" 
       style="filter: brightness(0) invert(1);" />
       
      <text x="110" y="50" font-size="16" fill="#fff" text-anchor="middle">Web App</text>
      <text x="110" y="70" font-size="12" fill="#9ca3af" text-anchor="middle">Multi-Container</text>
    </g>

    <!-- az webapp config -->
    <g transform="translate(440, 420)">
      <rect width="370" height="70" fill="#2d1b69" rx="12" stroke="#8b5cf6" stroke-width="2" />
      <text x="185" y="30" font-size="12" fill="#c7d2fe" text-anchor="middle">az webapp config container set</text>
      <text x="185" y="50" font-size="10" fill="#a5b4fc" text-anchor="middle">--multicontainer-config-type COMPOSE --multicontainer-config-file docker-compose.yml</text>
    </g>

    <!-- Arrows -->
    <path d="M270 145 L320 145" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow-blue)" />
    <path d="M490 145 L540 145" stroke="#ef4444" stroke-width="2" marker-end="url(#arrow-red)" />
    <path d="M710 145 L760 145" stroke="#10b981" stroke-width="2" marker-end="url(#arrow-green)" />
    <path d="M845 190 L845 305" stroke="#8b5cf6" stroke-width="2" />
    <path d="M845 305 L710 305" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrow-blue)" />
    <path d="M625 350 L625 420" stroke="#10b981" stroke-width="2" marker-end="url(#arrow-green)" />

    <!-- Labels -->
    <text x="395" y="125" font-size="12" fill="#3b82f6" text-anchor="middle">On push</text>
    <text x="625" y="125" font-size="12" fill="#10b981" text-anchor="middle">Build & Push</text>
    <text x="900" y="215" font-size="12" fill="#8b5cf6" text-anchor="middle">Image stored</text>
    <text x="760" y="285" font-size="12" fill="#10b981" text-anchor="middle">Pulls images</text>
    <text x="680" y="405" font-size="12" fill="#8b5cf6" text-anchor="middle">Deploys config</text>
  </svg>

  <ul class="card-list option2">
  <li>On every push → build Docker images</li>
  <li>Push to Azure Container Registry (ACR)</li>
  <li>Update Web App with new compose file</li>
  <li>Restart app → live update</li>
</ul>
</div>
